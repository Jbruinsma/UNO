<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/frontend/src/components/WebSocketTest.vue">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/WebSocketTest.vue" />
              <option name="originalContent" value="&lt;template&gt;&#10;  &lt;div class=&quot;max-w-xl mx-auto p-4&quot;&gt;&#10;    &lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;WebSocket Test&lt;/h2&gt;&#10;&#10;    &lt;div class=&quot;mb-3&quot;&gt;&#10;      &lt;label class=&quot;block text-sm font-medium mb-1&quot;&gt;Client ID&lt;/label&gt;&#10;      &lt;input v-model=&quot;clientId&quot; class=&quot;w-full border rounded px-3 py-2&quot; /&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;flex items-center gap-3 mb-4&quot;&gt;&#10;      &lt;button @click=&quot;connect&quot; :disabled=&quot;status === 'Connected' || status === 'Connecting'&quot; class=&quot;px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50&quot;&gt;Connect&lt;/button&gt;&#10;      &lt;button @click=&quot;disconnect&quot; :disabled=&quot;status === 'Disconnected'&quot; class=&quot;px-4 py-2 bg-gray-600 text-white rounded disabled:opacity-50&quot;&gt;Disconnect&lt;/button&gt;&#10;&#10;      &lt;div class=&quot;ml-auto&quot;&gt;&#10;        &lt;span :class=&quot;status === 'Connected' ? 'text-green-600' : 'text-red-600'&quot; class=&quot;font-medium&quot;&gt;{{ status }}&lt;/span&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;mb-4&quot;&gt;&#10;      &lt;label class=&quot;block text-sm font-medium mb-1&quot;&gt;Message&lt;/label&gt;&#10;      &lt;div class=&quot;flex gap-2&quot;&gt;&#10;        &lt;input v-model=&quot;messageInput&quot; class=&quot;flex-1 border rounded px-3 py-2&quot; @keyup.enter=&quot;sendMessage&quot; placeholder=&quot;Type a message and press Enter&quot; /&gt;&#10;        &lt;button @click=&quot;sendMessage&quot; class=&quot;px-4 py-2 bg-green-600 text-white rounded&quot;&gt;Send&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div&gt;&#10;      &lt;h3 class=&quot;text-lg font-medium mb-2&quot;&gt;Logs&lt;/h3&gt;&#10;      &lt;div class=&quot;border rounded max-h-72 overflow-auto p-2 bg-white&quot;&gt;&#10;        &lt;ul&gt;&#10;          &lt;li v-for=&quot;log in logs&quot; :key=&quot;log.id&quot; class=&quot;mb-2 text-sm&quot;&gt;&#10;            &lt;div class=&quot;text-xs text-gray-500&quot;&gt;{{ log.timestamp }}&lt;/div&gt;&#10;            &lt;div class=&quot;text-gray-800&quot;&gt;{{ log.text }}&lt;/div&gt;&#10;          &lt;/li&gt;&#10;        &lt;/ul&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/template&gt;&#10;&#10;&lt;script setup lang=&quot;ts&quot;&gt;&#10;import { ref, onUnmounted } from 'vue'&#10;&#10;// Types &amp; Interfaces&#10;export type ConnectionStatus = 'Disconnected' | 'Connecting' | 'Connected'&#10;export interface LogMessage {&#10;  id: number&#10;  text: string&#10;  timestamp: string&#10;}&#10;&#10;// Reactive State&#10;const status = ref&lt;ConnectionStatus&gt;('Disconnected')&#10;const clientId = ref&lt;string&gt;('player-1')&#10;const socket = ref&lt;WebSocket | null&gt;(null)&#10;const messageInput = ref&lt;string&gt;('')&#10;const logs = ref&lt;LogMessage[]&gt;([])&#10;let nextId = 1&#10;&#10;// Helpers&#10;function pushLog(text: string) {&#10;  logs.value.push({ id: nextId++, text, timestamp: new Date().toISOString() })&#10;}&#10;&#10;// Methods&#10;function connect() {&#10;  if (socket.value) return&#10;  status.value = 'Connecting'&#10;  const url = `ws://localhost:8000/ws/${encodeURIComponent(clientId.value)}`&#10;  try {&#10;    const ws = new WebSocket(url)&#10;    socket.value = ws&#10;&#10;    ws.addEventListener('open', () =&gt; {&#10;      status.value = 'Connected'&#10;      pushLog(`Connection opened to ${url}`)&#10;    })&#10;&#10;    ws.addEventListener('message', (ev: MessageEvent) =&gt; {&#10;      // Try to parse message; accept plain text&#10;      let text = ''&#10;      try {&#10;        text = typeof ev.data === 'string' ? ev.data : JSON.stringify(ev.data)&#10;      } catch (e) {&#10;        text = String(ev.data)&#10;      }&#10;      pushLog(text)&#10;    })&#10;&#10;    ws.addEventListener('close', () =&gt; {&#10;      status.value = 'Disconnected'&#10;      socket.value = null&#10;      pushLog('Connection closed')&#10;    })&#10;&#10;    ws.addEventListener('error', (ev) =&gt; {&#10;      pushLog('WebSocket error')&#10;    })&#10;  } catch (err) {&#10;    status.value = 'Disconnected'&#10;    pushLog('Failed to create WebSocket: ' + String(err))&#10;  }&#10;}&#10;&#10;function sendMessage() {&#10;  if (!socket.value || socket.value.readyState !== WebSocket.OPEN) {&#10;    pushLog('Cannot send message: socket not open')&#10;    return&#10;  }&#10;  const text = messageInput.value.trim()&#10;  if (!text) return&#10;  socket.value.send(text)&#10;  pushLog(`Sent: ${text}`)&#10;  messageInput.value = ''&#10;}&#10;&#10;function disconnect() {&#10;  if (socket.value) {&#10;    socket.value.close()&#10;    // close handler will set socket to null and update status&#10;  } else {&#10;    status.value = 'Disconnected'&#10;  }&#10;}&#10;&#10;// Lifecycle&#10;onUnmounted(() =&gt; {&#10;  if (socket.value) {&#10;    socket.value.close()&#10;  }&#10;})&#10;&lt;/script&gt;&#10;&#10;&lt;style scoped&gt;&#10;/* Fallback styles if Tailwind isn't present */&#10;.max-w-xl { max-width: 40rem; }&#10;.mx-auto { margin-left: auto; margin-right: auto; }&#10;.p-4 { padding: 1rem; }&#10;.mb-4 { margin-bottom: 1rem; }&#10;.mb-3 { margin-bottom: .75rem; }&#10;.mb-2 { margin-bottom: .5rem; }&#10;.border { border: 1px solid #e5e7eb; }&#10;.rounded { border-radius: .375rem; }&#10;.px-3 { padding-left: .75rem; padding-right: .75rem; }&#10;.py-2 { padding-top: .5rem; padding-bottom: .5rem; }&#10;.bg-white { background: #fff; }&#10;&lt;/style&gt;&#10;&#10;" />
              <option name="updatedContent" value="&lt;template&gt;&#10;  &lt;div class=&quot;max-w-xl mx-auto p-4&quot;&gt;&#10;    &lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;WebSocket Test&lt;/h2&gt;&#10;&#10;    &lt;div class=&quot;mb-3&quot;&gt;&#10;      &lt;label class=&quot;block text-sm font-medium mb-1&quot;&gt;Client ID&lt;/label&gt;&#10;      &lt;input v-model=&quot;clientId&quot; class=&quot;w-full border rounded px-3 py-2&quot; /&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;flex items-center gap-3 mb-4&quot;&gt;&#10;      &lt;button @click=&quot;connect&quot; :disabled=&quot;status === 'Connected' || status === 'Connecting'&quot; class=&quot;px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50&quot;&gt;Connect&lt;/button&gt;&#10;      &lt;button @click=&quot;disconnect&quot; :disabled=&quot;status === 'Disconnected'&quot; class=&quot;px-4 py-2 bg-gray-600 text-white rounded disabled:opacity-50&quot;&gt;Disconnect&lt;/button&gt;&#10;&#10;      &lt;div class=&quot;ml-auto&quot;&gt;&#10;        &lt;span :class=&quot;status === 'Connected' ? 'text-green-600' : 'text-red-600'&quot; class=&quot;font-medium&quot;&gt;{{ status }}&lt;/span&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;mb-4&quot;&gt;&#10;      &lt;label class=&quot;block text-sm font-medium mb-1&quot;&gt;Message&lt;/label&gt;&#10;      &lt;div class=&quot;flex gap-2&quot;&gt;&#10;        &lt;input v-model=&quot;messageInput&quot; class=&quot;flex-1 border rounded px-3 py-2&quot; @keyup.enter=&quot;sendMessage&quot; placeholder=&quot;Type a message and press Enter&quot; /&gt;&#10;        &lt;button @click=&quot;sendMessage&quot; class=&quot;px-4 py-2 bg-green-600 text-white rounded&quot;&gt;Send&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div&gt;&#10;      &lt;h3 class=&quot;text-lg font-medium mb-2&quot;&gt;Logs&lt;/h3&gt;&#10;      &lt;div class=&quot;border rounded max-h-72 overflow-auto p-2 bg-white&quot;&gt;&#10;        &lt;ul&gt;&#10;          &lt;li v-for=&quot;log in logs&quot; :key=&quot;log.id&quot; class=&quot;mb-2 text-sm&quot;&gt;&#10;            &lt;div class=&quot;text-xs text-gray-500&quot;&gt;{{ log.timestamp }}&lt;/div&gt;&#10;            &lt;div class=&quot;text-gray-800&quot;&gt;{{ log.text }}&lt;/div&gt;&#10;          &lt;/li&gt;&#10;        &lt;/ul&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/template&gt;&#10;&#10;&lt;script setup lang=&quot;ts&quot;&gt;&#10;import { ref, onUnmounted } from 'vue'&#10;&#10;// Types &amp; Interfaces&#10;export type ConnectionStatus = 'Disconnected' | 'Connecting' | 'Connected'&#10;export interface LogMessage {&#10;  id: number&#10;  text: string&#10;  timestamp: string&#10;}&#10;&#10;// Reactive State&#10;const status = ref&lt;ConnectionStatus&gt;('Disconnected')&#10;const clientId = ref&lt;string&gt;('player-1')&#10;const socket = ref&lt;WebSocket | null&gt;(null)&#10;const messageInput = ref&lt;string&gt;('')&#10;const logs = ref&lt;LogMessage[]&gt;([])&#10;let nextId = 1&#10;&#10;// Helpers&#10;function pushLog(text: string) {&#10;  logs.value.push({ id: nextId++, text, timestamp: new Date().toISOString() })&#10;}&#10;&#10;// Methods&#10;function connect() {&#10;  if (socket.value) return&#10;  status.value = 'Connecting'&#10;  const url = `ws://localhost:8000/ws/${encodeURIComponent(clientId.value)}`&#10;  try {&#10;    const ws = new WebSocket(url)&#10;    socket.value = ws&#10;&#10;    ws.addEventListener('open', () =&gt; {&#10;      status.value = 'Connected'&#10;      pushLog(`Connection opened to ${url}`)&#10;    })&#10;&#10;    ws.addEventListener('message', (ev: MessageEvent) =&gt; {&#10;      // Try to parse message; accept plain text&#10;      let text: string&#10;      try {&#10;        text = typeof ev.data === 'string' ? ev.data : JSON.stringify(ev.data)&#10;      } catch {&#10;        // fallback if JSON.stringify throws&#10;        text = String(ev.data)&#10;      }&#10;      pushLog(text)&#10;    })&#10;&#10;    ws.addEventListener('close', () =&gt; {&#10;      status.value = 'Disconnected'&#10;      socket.value = null&#10;      pushLog('Connection closed')&#10;    })&#10;&#10;    ws.addEventListener('error', () =&gt; {&#10;      pushLog('WebSocket error')&#10;    })&#10;  } catch (err) {&#10;    status.value = 'Disconnected'&#10;    pushLog('Failed to create WebSocket: ' + String(err))&#10;  }&#10;}&#10;&#10;function sendMessage() {&#10;  if (!socket.value || socket.value.readyState !== WebSocket.OPEN) {&#10;    pushLog('Cannot send message: socket not open')&#10;    return&#10;  }&#10;  const text = messageInput.value.trim()&#10;  if (!text) return&#10;  socket.value.send(text)&#10;  pushLog(`Sent: ${text}`)&#10;  messageInput.value = ''&#10;}&#10;&#10;function disconnect() {&#10;  if (socket.value) {&#10;    socket.value.close()&#10;    // close handler will set socket to null and update status&#10;  } else {&#10;    status.value = 'Disconnected'&#10;  }&#10;}&#10;&#10;// Lifecycle&#10;onUnmounted(() =&gt; {&#10;  if (socket.value) {&#10;    socket.value.close()&#10;  }&#10;})&#10;&lt;/script&gt;&#10;&#10;&lt;style scoped&gt;&#10;/* Fallback styles if Tailwind isn't present */&#10;.max-w-xl { max-width: 40rem; }&#10;.mx-auto { margin-left: auto; margin-right: auto; }&#10;.p-4 { padding: 1rem; }&#10;.mb-4 { margin-bottom: 1rem; }&#10;.mb-3 { margin-bottom: .75rem; }&#10;.mb-2 { margin-bottom: .5rem; }&#10;.border { border: 1px solid #e5e7eb; }&#10;.rounded { border-radius: .375rem; }&#10;.px-3 { padding-left: .75rem; padding-right: .75rem; }&#10;.py-2 { padding-top: .5rem; padding-bottom: .5rem; }&#10;.bg-white { background: #fff; }&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>